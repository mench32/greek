import{s as g,e as b,c as w,b as y,f as m,i as E,I as M,J as S,D,o as I,k as h,n as q}from"../chunks/scheduler.DX4TyY33.js";import{S as L,i as x,c as A,a as T,m as k,t as u,b as f,e as H,d as C,g as P}from"../chunks/index.BN6Ch8PT.js";import{b as z}from"../chunks/paths.sBCQvg4g.js";import{p as R}from"../chunks/audio.DeAYY8kc.js";import{H as V,A as G,D as J}from"../chunks/common.consts.CokIJ-YU.js";import{s as K}from"../chunks/settings.CUhQn8qd.js";import{p as N}from"../chunks/stores.CTB88kgv.js";function W(e){let t,n,o;return n=new V({props:{text:e[1],words:e[0]}}),{c(){t=b("div"),A(n.$$.fragment)},l(r){t=w(r,"DIV",{});var s=y(t);T(n.$$.fragment,s),s.forEach(m)},m(r,s){E(r,t,s),k(n,t,null),e[3](t),o=!0},p(r,[s]){const a={};s&2&&(a.text=r[1]),s&1&&(a.words=r[0]),n.$set(a)},i(r){o||(u(n.$$.fragment,r),o=!0)},o(r){f(n.$$.fragment,r),o=!1},d(r){r&&m(t),H(n),e[3](null)}}}function j(e){if(e&&e instanceof HTMLElement){const t=e.getAttribute("data-placeholder")??"",n=Math.max(3,t.length);e.style.minWidth=`calc(${n}ch + 1ch)`}}function d(e){if(e.target instanceof HTMLElement){const t=e.target.innerText;if(e.target.querySelectorAll("br").forEach(n=>n.remove()),(e.target.querySelectorAll("br").length||t.trim()!==e.target.innerHTML.trim())&&(e.target.innerHTML=t),e.key==="Enter"){const n=e.target.getAttribute("data-answer");t.trim().toLowerCase()===n?(e.target.classList.remove("error"),e.target.removeAttribute("contenteditable"),R(`${z}/success.mp3`)):e.target.classList.add("error")}}}function p(e){e.target instanceof HTMLElement&&(e.target.querySelectorAll("br").forEach(t=>t.remove()),(e.target.querySelectorAll("br").length||e.target.innerText.trim()!==e.target.innerHTML.trim())&&(e.target.innerHTML=e.target.innerText))}function B(e,t,n){let{words:o=[]}=t,{text:r}=t,s;M(()=>{s.querySelectorAll(".answer").forEach(i=>{i instanceof HTMLElement&&(i.setAttribute("contenteditable","true"),i.innerText=i.getAttribute("data-placeholder")??"",j(i))}),s.addEventListener("input",p),s.addEventListener("keypress",d)}),S(()=>{s.removeEventListener("input",p),s.removeEventListener("keypress",d)});function a(i){D[i?"unshift":"push"](()=>{s=i,n(2,s)})}return e.$$set=i=>{"words"in i&&n(0,o=i.words),"text"in i&&n(1,r=i.text)},[o,r,s,a]}class F extends L{constructor(t){super(),x(this,t,B,W,g,{words:0,text:1})}}function _(e){let t,n;return t=new F({props:{text:e[1],words:e[0]}}),{c(){A(t.$$.fragment)},l(o){T(t.$$.fragment,o)},m(o,r){k(t,o,r),n=!0},p(o,r){const s={};r&2&&(s.text=o[1]),r&1&&(s.words=o[0]),t.$set(s)},i(o){n||(u(t.$$.fragment,o),n=!0)},o(o){f(t.$$.fragment,o),n=!1},d(o){H(t,o)}}}function O(e){let t,n=e[1],o,r=_(e);return{c(){t=b("div"),r.c(),this.h()},l(s){t=w(s,"DIV",{class:!0});var a=y(t);r.l(a),a.forEach(m),this.h()},h(){I(t,"class","md")},m(s,a){E(s,t,a),r.m(t,null),o=!0},p(s,[a]){a&2&&g(n,n=s[1])?(P(),f(r,1,1,q),C(),r=_(s),r.c(),u(r,1),r.m(t,null)):r.p(s,a)},i(s){o||(u(r),o=!0)},o(s){f(r),o=!1},d(s){s&&m(t),r.d(s)}}}function Q(e,t,n){let o,r;h(e,N,c=>n(3,o=c)),h(e,K,c=>n(4,r=c));let{data:s}=t,a="";const i=s.dict.map(c=>({word:c.origin.trim().replace(/(\sη$)|(\sο$)|(\sτο$)/,""),title:c.translate,whole:!0}));let l=[];return e.$$set=c=>{"data"in c&&n(2,s=c.data)},e.$$.update=()=>{var c;e.$$.dirty&17&&(n(0,l=[]),r.showTranslates&&l.push(["color: steelblue;",i]),r.showArticles&&l.push(["color: coral;",G]),r.showDigraphs&&l.push(["text-decoration: underline;",J]),n(0,l),n(4,r)),e.$$.dirty&12&&n(1,a=((c=s.exercises[Number(o.params.exercise)])==null?void 0:c.text)??"")},[l,a,s,o,r]}class te extends L{constructor(t){super(),x(this,t,Q,O,g,{data:2})}}export{te as component};
