import{s as g,e as b,c as w,b as E,f as u,i as L,I as M,J as S,D,o as I,k as h,n as q}from"../chunks/scheduler.DX4TyY33.js";import{S as x,i as y,c as A,a as T,m as k,t as f,b as m,e as H,d as C,g as P}from"../chunks/index.BN6Ch8PT.js";import{H as z,A as R,D as V}from"../chunks/common.consts.CokIJ-YU.js";import{s as G}from"../chunks/settings.CUhQn8qd.js";import{p as J}from"../chunks/stores.CcmFDeP9.js";function K(e){let t,n,o;return n=new z({props:{text:e[1],words:e[0]}}),{c(){t=b("div"),A(n.$$.fragment)},l(r){t=w(r,"DIV",{});var s=E(t);T(n.$$.fragment,s),s.forEach(u)},m(r,s){L(r,t,s),k(n,t,null),e[3](t),o=!0},p(r,[s]){const a={};s&2&&(a.text=r[1]),s&1&&(a.words=r[0]),n.$set(a)},i(r){o||(f(n.$$.fragment,r),o=!0)},o(r){m(n.$$.fragment,r),o=!1},d(r){r&&u(t),H(n),e[3](null)}}}function N(e){if(e&&e instanceof HTMLElement){const t=e.getAttribute("data-placeholder")??"",n=Math.max(3,t.length);e.style.minWidth=`calc(${n}ch + 1ch)`}}function d(e){if(e.target instanceof HTMLElement){const t=e.target.innerText;if(e.target.querySelectorAll("br").forEach(n=>n.remove()),(e.target.querySelectorAll("br").length||t.trim()!==e.target.innerHTML.trim())&&(e.target.innerHTML=t),e.key==="Enter"){const n=e.target.getAttribute("data-answer");t.trim().toLowerCase()===n?(e.target.classList.remove("error"),e.target.removeAttribute("contenteditable")):e.target.classList.add("error")}}}function p(e){e.target instanceof HTMLElement&&(e.target.querySelectorAll("br").forEach(t=>t.remove()),(e.target.querySelectorAll("br").length||e.target.innerText.trim()!==e.target.innerHTML.trim())&&(e.target.innerHTML=e.target.innerText))}function W(e,t,n){let{words:o=[]}=t,{text:r}=t,s;M(()=>{s.querySelectorAll(".answer").forEach(i=>{i instanceof HTMLElement&&(i.setAttribute("contenteditable","true"),i.innerText=i.getAttribute("data-placeholder")??"",N(i))}),s.addEventListener("input",p),s.addEventListener("keypress",d)}),S(()=>{s.removeEventListener("input",p),s.removeEventListener("keypress",d)});function a(i){D[i?"unshift":"push"](()=>{s=i,n(2,s)})}return e.$$set=i=>{"words"in i&&n(0,o=i.words),"text"in i&&n(1,r=i.text)},[o,r,s,a]}class j extends x{constructor(t){super(),y(this,t,W,K,g,{words:0,text:1})}}function _(e){let t,n;return t=new j({props:{text:e[1],words:e[0]}}),{c(){A(t.$$.fragment)},l(o){T(t.$$.fragment,o)},m(o,r){k(t,o,r),n=!0},p(o,r){const s={};r&2&&(s.text=o[1]),r&1&&(s.words=o[0]),t.$set(s)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){m(t.$$.fragment,o),n=!1},d(o){H(t,o)}}}function B(e){let t,n=e[1],o,r=_(e);return{c(){t=b("div"),r.c(),this.h()},l(s){t=w(s,"DIV",{class:!0});var a=E(t);r.l(a),a.forEach(u),this.h()},h(){I(t,"class","md")},m(s,a){L(s,t,a),r.m(t,null),o=!0},p(s,[a]){a&2&&g(n,n=s[1])?(P(),m(r,1,1,q),C(),r=_(s),r.c(),f(r,1),r.m(t,null)):r.p(s,a)},i(s){o||(f(r),o=!0)},o(s){m(r),o=!1},d(s){s&&u(t),r.d(s)}}}function F(e,t,n){let o,r;h(e,J,l=>n(3,o=l)),h(e,G,l=>n(4,r=l));let{data:s}=t,a="";const i=s.dict.map(l=>({word:l.origin.trim().replace(/(\sη$)|(\sο$)|(\sτο$)/,""),title:l.translate,whole:!0}));let c=[];return e.$$set=l=>{"data"in l&&n(2,s=l.data)},e.$$.update=()=>{var l;e.$$.dirty&17&&(n(0,c=[]),r.showTranslates&&c.push(["color: steelblue;",i]),r.showArticles&&c.push(["color: coral;",R]),r.showDigraphs&&c.push(["text-decoration: underline;",V]),n(0,c),n(4,r)),e.$$.dirty&12&&n(1,a=((l=s.exercises[Number(o.params.exercise)])==null?void 0:l.text)??"")},[c,a,s,o,r]}class Z extends x{constructor(t){super(),y(this,t,F,B,g,{data:2})}}export{Z as component};
