import{s as g,e as b,c as w,b as L,f as u,i as x,G as M,I as S,C as I,z as q,k as h,n as D}from"../chunks/scheduler.Acqme8hN.js";import{S as A,i as E,c as y,a as T,m as H,t as m,b as f,e as k,d as C,g as z}from"../chunks/index.vb97ehHb.js";import{H as P,A as G,D as R}from"../chunks/common.consts.DbmYBExJ.js";import{s as V}from"../chunks/settings.B-tSafx9.js";import{p as K}from"../chunks/stores.DDzTfzCi.js";function N(e){let t,n,o;return n=new P({props:{text:e[1],words:e[0]}}),{c(){t=b("div"),y(n.$$.fragment)},l(r){t=w(r,"DIV",{});var s=L(t);T(n.$$.fragment,s),s.forEach(u)},m(r,s){x(r,t,s),H(n,t,null),e[3](t),o=!0},p(r,[s]){const a={};s&2&&(a.text=r[1]),s&1&&(a.words=r[0]),n.$set(a)},i(r){o||(m(n.$$.fragment,r),o=!0)},o(r){f(n.$$.fragment,r),o=!1},d(r){r&&u(t),k(n),e[3](null)}}}function W(e){if(e&&e instanceof HTMLElement){const t=e.getAttribute("data-placeholder")??"",n=e.getAttribute("data-answer")??"",o=Math.max(3,t.length);e.style.minWidth=`calc(${o}ch + 1ch)`,console.log(t,n)}}function d(e){if(e.target instanceof HTMLElement){const t=e.target.innerText;if(e.target.querySelectorAll("br").forEach(n=>n.remove()),(e.target.querySelectorAll("br").length||t.trim()!==e.target.innerHTML.trim())&&(e.target.innerHTML=t),console.log("html",e.target.innerHTML),console.log("text",t.length),e.key==="Enter"){const n=e.target.getAttribute("data-answer");t.trim().toLowerCase()===n?(e.target.classList.remove("error"),e.target.removeAttribute("contenteditable")):e.target.classList.add("error")}}}function p(e){e.target instanceof HTMLElement&&(e.target.querySelectorAll("br").forEach(t=>t.remove()),(e.target.querySelectorAll("br").length||e.target.innerText.trim()!==e.target.innerHTML.trim())&&(e.target.innerHTML=e.target.innerText))}function j(e,t,n){let{words:o=[]}=t,{text:r}=t,s;M(()=>{s.querySelectorAll(".answer").forEach(i=>{i instanceof HTMLElement&&(i.setAttribute("contenteditable","true"),i.innerText=i.getAttribute("data-placeholder")??"",W(i))}),s.addEventListener("input",p),s.addEventListener("keypress",d)}),S(()=>{s.removeEventListener("input",p),s.removeEventListener("keypress",d)});function a(i){I[i?"unshift":"push"](()=>{s=i,n(2,s)})}return e.$$set=i=>{"words"in i&&n(0,o=i.words),"text"in i&&n(1,r=i.text)},[o,r,s,a]}class B extends A{constructor(t){super(),E(this,t,j,N,g,{words:0,text:1})}}function _(e){let t,n;return t=new B({props:{text:e[1],words:e[0]}}),{c(){y(t.$$.fragment)},l(o){T(t.$$.fragment,o)},m(o,r){H(t,o,r),n=!0},p(o,r){const s={};r&2&&(s.text=o[1]),r&1&&(s.words=o[0]),t.$set(s)},i(o){n||(m(t.$$.fragment,o),n=!0)},o(o){f(t.$$.fragment,o),n=!1},d(o){k(t,o)}}}function F(e){let t,n=e[1],o,r=_(e);return{c(){t=b("div"),r.c(),this.h()},l(s){t=w(s,"DIV",{class:!0});var a=L(t);r.l(a),a.forEach(u),this.h()},h(){q(t,"class","md")},m(s,a){x(s,t,a),r.m(t,null),o=!0},p(s,[a]){a&2&&g(n,n=s[1])?(z(),f(r,1,1,D),C(),r=_(s),r.c(),m(r,1),r.m(t,null)):r.p(s,a)},i(s){o||(m(r),o=!0)},o(s){f(r),o=!1},d(s){s&&u(t),r.d(s)}}}function J(e,t,n){let o,r;h(e,K,l=>n(3,o=l)),h(e,V,l=>n(4,r=l));let{data:s}=t,a="";const i=s.dict.map(l=>({word:l.origin.trim().replace(/(\sη$)|(\sο$)|(\sτο$)/,""),title:l.translate,whole:!0}));let c=[];return e.$$set=l=>{"data"in l&&n(2,s=l.data)},e.$$.update=()=>{var l;e.$$.dirty&17&&(n(0,c=[]),r.showTranslates&&c.push(["color: steelblue;",i]),r.showArticles&&c.push(["color: coral;",G]),r.showDigraphs&&c.push(["text-decoration: underline;",R]),n(0,c),n(4,r)),e.$$.dirty&12&&n(1,a=((l=s.exercises[Number(o.params.exercise)])==null?void 0:l.text)??"")},[c,a,s,o,r]}class Z extends A{constructor(t){super(),E(this,t,J,F,g,{data:2})}}export{Z as component};
