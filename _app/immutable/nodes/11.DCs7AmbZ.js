import{s as g,e as b,c as w,b as E,f as u,i as L,G as M,I as S,C as I,z as q,k as h,n as D}from"../chunks/scheduler.D_qHSHpd.js";import{S as x,i as y,c as A,a as T,m as k,t as f,b as m,e as H,d as C,g as z}from"../chunks/index.4fqkyhut.js";import{H as P,A as G,D as R}from"../chunks/common.consts.VpQTAgxX.js";import{s as V}from"../chunks/settings.C6VYsGzv.js";import{p as K}from"../chunks/stores.BVBShY3d.js";function N(e){let t,n,a;return n=new P({props:{text:e[1],words:e[0]}}),{c(){t=b("div"),A(n.$$.fragment)},l(r){t=w(r,"DIV",{});var s=E(t);T(n.$$.fragment,s),s.forEach(u)},m(r,s){L(r,t,s),k(n,t,null),e[3](t),a=!0},p(r,[s]){const o={};s&2&&(o.text=r[1]),s&1&&(o.words=r[0]),n.$set(o)},i(r){a||(f(n.$$.fragment,r),a=!0)},o(r){m(n.$$.fragment,r),a=!1},d(r){r&&u(t),H(n),e[3](null)}}}function W(e){if(e&&e instanceof HTMLElement){const t=e.getAttribute("data-placeholder")??"",n=Math.max(3,t.length);e.style.minWidth=`calc(${n}ch + 1ch)`}}function d(e){if(e.target instanceof HTMLElement){const t=e.target.innerText;if(e.target.querySelectorAll("br").forEach(n=>n.remove()),(e.target.querySelectorAll("br").length||t.trim()!==e.target.innerHTML.trim())&&(e.target.innerHTML=t),e.key==="Enter"){const n=e.target.getAttribute("data-answer");t.trim().toLowerCase()===n?(e.target.classList.remove("error"),e.target.removeAttribute("contenteditable")):e.target.classList.add("error")}}}function p(e){e.target instanceof HTMLElement&&(e.target.querySelectorAll("br").forEach(t=>t.remove()),(e.target.querySelectorAll("br").length||e.target.innerText.trim()!==e.target.innerHTML.trim())&&(e.target.innerHTML=e.target.innerText))}function j(e,t,n){let{words:a=[]}=t,{text:r}=t,s;M(()=>{s.querySelectorAll(".answer").forEach(i=>{i instanceof HTMLElement&&(i.setAttribute("contenteditable","true"),i.innerText=i.getAttribute("data-placeholder")??"",W(i))}),s.addEventListener("input",p),s.addEventListener("keypress",d)}),S(()=>{s.removeEventListener("input",p),s.removeEventListener("keypress",d)});function o(i){I[i?"unshift":"push"](()=>{s=i,n(2,s)})}return e.$$set=i=>{"words"in i&&n(0,a=i.words),"text"in i&&n(1,r=i.text)},[a,r,s,o]}class B extends x{constructor(t){super(),y(this,t,j,N,g,{words:0,text:1})}}function _(e){let t,n;return t=new B({props:{text:e[1],words:e[0]}}),{c(){A(t.$$.fragment)},l(a){T(t.$$.fragment,a)},m(a,r){k(t,a,r),n=!0},p(a,r){const s={};r&2&&(s.text=a[1]),r&1&&(s.words=a[0]),t.$set(s)},i(a){n||(f(t.$$.fragment,a),n=!0)},o(a){m(t.$$.fragment,a),n=!1},d(a){H(t,a)}}}function F(e){let t,n=e[1],a,r=_(e);return{c(){t=b("div"),r.c(),this.h()},l(s){t=w(s,"DIV",{class:!0});var o=E(t);r.l(o),o.forEach(u),this.h()},h(){q(t,"class","md")},m(s,o){L(s,t,o),r.m(t,null),a=!0},p(s,[o]){o&2&&g(n,n=s[1])?(z(),m(r,1,1,D),C(),r=_(s),r.c(),f(r,1),r.m(t,null)):r.p(s,o)},i(s){a||(f(r),a=!0)},o(s){m(r),a=!1},d(s){s&&u(t),r.d(s)}}}function J(e,t,n){let a,r;h(e,K,l=>n(3,a=l)),h(e,V,l=>n(4,r=l));let{data:s}=t,o="";const i=s.dict.map(l=>({word:l.origin.trim().replace(/(\sη$)|(\sο$)|(\sτο$)/,""),title:l.translate,whole:!0}));let c=[];return e.$$set=l=>{"data"in l&&n(2,s=l.data)},e.$$.update=()=>{var l;e.$$.dirty&17&&(n(0,c=[]),r.showTranslates&&c.push(["color: steelblue;",i]),r.showArticles&&c.push(["color: coral;",G]),r.showDigraphs&&c.push(["text-decoration: underline;",R]),n(0,c),n(4,r)),e.$$.dirty&12&&n(1,o=((l=s.exercises[Number(a.params.exercise)])==null?void 0:l.text)??"")},[c,o,s,a,r]}class Z extends x{constructor(t){super(),y(this,t,J,F,g,{data:2})}}export{Z as component};
